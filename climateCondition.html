<!DOCTYPE html>
<html>

<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link type="text/css" rel="stylesheet" href="./css/styles.css">
    <link type="text/css" rel="stylesheet" href="./css/climateCondition.css">
    <title>KriEC Tech </title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
        integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>


<body>
    <header class="headerArea">
        <div class="mainMenu">
            <!-- navbar -->
            <nav class="navbar navbar-dark bg-dark fixed-top">
                <div class="container-fluid">
                    <a class="navbar-brand" href="#">KriEC Tech</a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas"
                        data-bs-target="#offcanvasDarkNavbar" aria-controls="offcanvasDarkNavbar"
                        aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="offcanvas offcanvas-end text-bg-dark" tabindex="-1" id="offcanvasDarkNavbar"
                        aria-labelledby="offcanvasDarkNavbarLabel">
                        <div class="offcanvas-header">
                            <h5 class="offcanvas-title" id="offcanvasDarkNavbarLabel">KriEC Tech</h5>
                            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas"
                                aria-label="Close"></button>
                        </div>
                        <div class="offcanvas-body">
                            <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
                                <li class="nav-item">
                                    <a class="nav-link" aria-current="page" href="./index.html">Home</a>
                                </li>
                                <li class="nav-item dropdown">
                                    <a class="nav-link active dropdown-toggle" href="#" role="button"
                                        data-bs-toggle="dropdown" aria-expanded="false">
                                        Services
                                    </a>
                                    <ul class="dropdown-menu dropdown-menu-dark">
                                        <li><a class="dropdown-item soil-moisture-call">Soil moisture</a></li>
                                        <li><a class="dropdown-item dropdown-active climate-condition-call">Climate
                                                condition</a></li>
                                        <li><a class="dropdown-item water-use-call">Water use</a></li>
                                        <li><a class="dropdown-item crop-stge-call">Crop stage</a></li>
                                        <li><a class="dropdown-item time-period-call">Time period</a></li>
                                        <li><a class="dropdown-item crop-type-call">Crop type</a></li>
                                        <li>
                                            <hr class="dropdown-divider">
                                        </li>
                                        <li><a class="dropdown-item edit-device-details-call">Edit Device Details</a>
                                        </li>
                                    </ul>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link about-us-call">About us</a>
                                </li>
                                <hr>

                                <li class="nav-item">
                                    <a class="nav-link login-form-call" aria-current="page">Login</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link registration-form-call" aria-current="page">Register</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link logout-button" aria-current="page">Logout</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </nav>
            <!-- navbar ends here -->
        </div>
    </header>
    <!-- Climate Condition -->
    <div class="container rectangular-container">
        <div class="card mt-2 weather-card">
            <div class="card-body">
                <h5 class="card-title city">Current Weather</h5>
                <div class="current-weather">
                    <p class="date"></p>
                    <p class="wind"></p>
                    <p class="humidity"></p>
                    <p class="rainfall"></p> <!-- Added rainfall section -->
                    <p class="tempC"></p> <!-- Celsius temperature inline -->
                    <p class="uvIndex" id="color"></p>
                </div>

                <!-- 5-Day Forecast Section -->
                <div class="forecast mt-4">
                    <h5 class="card-title">5-Days Weather Forecast</h5>
                    <div class="row justify-content-between">
                        <!-- Day 1 -->
                        <div class="col-md-2 text-center">
                            <p class="uPdate0"></p>
                            <img id="wicon0" src="" alt="Weather icon" class="img-fluid">
                            <p class="card-text0"></p>
                            <p class="card-hum0"></p>
                            <p class="card-rain0"></p> <!-- Added rainfall percentage -->
                        </div>

                        <!-- Day 2 -->
                        <div class="col-md-2 text-center">
                            <p class="uPdate1"></p>
                            <img id="wicon1" src="" alt="Weather icon" class="img-fluid">
                            <p class="card-text1"></p>
                            <p class="card-hum1"></p>
                            <p class="card-rain1"></p> <!-- Added rainfall percentage -->
                        </div>

                        <!-- Day 3 -->
                        <div class="col-md-2 text-center">
                            <p class="uPdate2"></p>
                            <img id="wicon2" src="" alt="Weather icon" class="img-fluid">
                            <p class="card-text2"></p>
                            <p class="card-hum2"></p>
                            <p class="card-rain2"></p> <!-- Added rainfall percentage -->
                        </div>

                        <!-- Day 4 -->
                        <div class="col-md-2 text-center">
                            <p class="uPdate3"></p>
                            <img id="wicon3" src="" alt="Weather icon" class="img-fluid">
                            <p class="card-text3"></p>
                            <p class="card-hum3"></p>
                            <p class="card-rain3"></p> <!-- Added rainfall percentage -->
                        </div>

                        <!-- Day 5 -->
                        <div class="col-md-2 text-center">
                            <p class="uPdate4"></p>
                            <img id="wicon4" src="" alt="Weather icon" class="img-fluid">
                            <p class="card-text4"></p>
                            <p class="card-hum4"></p>
                            <p class="card-rain4"></p> <!-- Added rainfall percentage -->
                        </div>
                    </div>
                </div>
            </div>
    </div>
    <!-- Climate Condition --end -->
    </div>

    </div>




    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
    <script defer type="module" src="./js/firebaseAuth.js"></script>
    <script src="./js/functions.js"></script>
    <!-- <script src="./js/climateCondition.js"></script> -->



    <!-- Scripts for jQuery and Bootstrap -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    
    <!-- Weather API Script -->
    <script type="text/javascript">
        $(document).ready(function () {
            var cityName = "Udaipur";
            var APIKey = "402fe03746dde66fe92a09674269957b";
            var queryURL = "https://api.openweathermap.org/data/2.5/weather?q=" + cityName + "&appid=" + APIKey;

            $.ajax({
                url: queryURL,
                method: "GET"
            }).then(function (response) {
                $(".city").html("<h1>" + response.name + " Weather Details</h1>");
                var d = new Date();
                var strDate = (d.getMonth() + 1) + "/" + d.getDate() + "/" + d.getFullYear();
                $(".date").text(strDate);
                $(".wind").text("Wind Speed: " + response.wind.speed + " m/s");
                $(".humidity").text("Humidity: " + response.main.humidity + "%");

                // Checking if 'rain' data exists and showing accordingly in one line
                var rainfall = response.rain && response.rain['1h'] ? response.rain['1h'] : 0;
                $(".rainfall").text("Rainfall: " + rainfall + " mm"); // Rainfall in mm

                // Display temperature in Celsius with °C in one line
                var tempC = (response.main.temp - 273.15).toFixed(2);
                $(".tempC").text("Temperature: " + tempC + "°C");
            });

            var forecastURL = "https://api.openweathermap.org/data/2.5/forecast?q=" + cityName + "&appid=" + APIKey;
            $.ajax({
                url: forecastURL,
                method: "GET"
            }).then(function (response) {
                for (var i = 0; i < 5; i++) {
                    var d = new Date();
                    d.setDate(d.getDate() + i + 1);
                    var strDate = (d.getMonth() + 1) + "/" + d.getDate();
                    $(".uPdate" + i).text(strDate);

                    var iconcode = response.list[i].weather[0].icon;
                    var iconurl = "http://openweathermap.org/img/w/" + iconcode + ".png";
                    $('#wicon' + i).attr('src', iconurl);

                    var tempForC = (response.list[i].main.temp - 273.15).toFixed(2);
                    $(".card-text" + i).text("Temp: " + tempForC + "°C"); // Temperature in Celsius with °C

                    $('.card-hum' + i).text('Humidity: ' + response.list[i].main.humidity + "%");

                    // Checking if 'rain' data exists for forecast and showing accordingly in one line
                    var forecastRain = response.list[i].rain && response.list[i].rain['3h'] ? response.list[i].rain['3h'] : 0;
                    $('.card-rain' + i).text('Rainfall: ' + forecastRain + " mm"); // Rainfall in mm
                }
            });
        });
    </script>
</body>

</html>